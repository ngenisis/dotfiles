set nocompatible

" Download vim-plug if not present
if empty(glob('~/.vim/autoload/plug.vim'))
	silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
endif

call plug#begin()

" A Git wrapper so awesome, it should be illegal
	Plug 'tpope/vim-fugitive'
" enable repeating supported plugin maps with .
	Plug 'tpope/vim-repeat'
" comment stuff out
	Plug 'tpope/vim-commentary'
" quoting/parenthesizing made simple
	Plug 'tpope/vim-surround'
" Pairs of handy bracket mappings
	Plug 'tpope/vim-unimpaired'
" Defaults everyone can agree on
	Plug 'tpope/vim-sensible'
" Helpers for UNIX
	Plug 'tpope/vim-eunuch'
" Better whitespace highlighting for Vim
	Plug 'ntpeters/vim-better-whitespace'
" lean & mean status/tabline for vim that's light as air
	Plug 'vim-airline/vim-airline'
" Mathematica syntax highlighting (and more) for vim
	Plug 'rsmenon/vim-mathematica', { 'for': 'mma' }
" A command-line fuzzy finder
	Plug 'junegunn/fzf'
" fzf heart vim
	Plug 'junegunn/fzf.vim'
" Create your own text objects
	Plug 'kana/vim-textobj-user'
" Text objects for indented blocks of lines
	Plug 'kana/vim-textobj-indent'
" Text objects for entire buffer
	Plug 'kana/vim-textobj-entire'
" Text objects for the current line
	Plug 'kana/vim-textobj-line'
" Vim text objects for comments
	Plug 'glts/vim-textobj-comment'
" Syntastic
	Plug 'vim-syntastic/syntastic'
call plug#end()

" Set background to dark
	set background=dark

" Enable line wrapping
	set wrap

" Populate airline fonts
	let g:airline_powerline_fonts = 1

" display line number of current line and relative line numbers
	set number relativenumber

" Indentation
	set autoindent smartindent

" Set tab and shift width to 4
	set tabstop=4
	set softtabstop=4
	set shiftwidth=4

" Split to the bottom and the right
	set splitbelow splitright

" Disable automatic comments on newlines
	autocmd FileType * set formatoptions-=c formatoptions-=r formatoptions-=o

" Update diff when a buffer is written
	autocmd BufWritePost * if &diff == 1 | diffupdate | endif

" Always display status line
	set laststatus=2

" Ensure .wl files are read with the correct filetypes
	autocmd BufRead,BufNewFile *.wl set filetype=mma
	autocmd BufRead,BufNewFile ~/.mutt/* set filetype=muttrc

" Set text width to 80 in emails
	autocmd FileType mail set textwidth=80

" vim_better_whitespace settings
	let g:strip_whitelines_at_eof=1
	let g:show_spaces_that_precede_tabs=1

" Change <Leader> to <Space>
	let mapleader = " "
	nnoremap <Space> <Nop>

" System clipboard mappings
	nnoremap	<Leader>y	"+y
	nnoremap	<Leader>p	"+p
	nnoremap	<Leader>Y	"*y
	nnoremap	<Leader>P	"*p

" Replace all mapping
	nnoremap	<Leader>r	:%s//g<Left><Left>

" fzf mappings
	nnoremap	<Leader>f	:Files<Enter>
	nnoremap	<Leader>l	:Lines<Enter>
	nnoremap	<leader>b	:Buffers<Enter>

" Use blinking pipe cursor in insert mode and blinking block otherwise
	silent execute "!echo -en \<esc>[1 q"
	autocmd InsertEnter * silent execute "!echo -en \<esc>[5 q"
	autocmd InsertLeave * silent execute "!echo -en \<esc>[1 q"

" Recommended Syntastic settings
    let g:syntastic_always_populate_loc_list = 1
    let g:syntastic_auto_loc_list = 1
    let g:syntastic_check_on_wq = 0
